# Elegant CLI

[English](README_en.md) | [ä¸­æ–‡](README.md)

**Elegant CLI æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ Python å‘½ä»¤è¡Œå‚æ•°è§£æå¼•æ“ã€‚å®ƒå°†ç¹ççš„ argparse ä»£ç è½¬æ¢ä¸ºç›´è§‚çš„å­—å…¸é…ç½®ï¼ˆSchemaï¼‰ã€‚**

å®ƒä¸»è¦è§£å†³åŸç”Ÿ `argparse` åœ¨å¤„ç†å¤æ‚ CLI æ—¶çš„ä¸‰ä¸ªç—›ç‚¹ï¼š
1.  **é»˜è®¤è·¯ç”±**ï¼šä¸è¾“å…¥å­å‘½ä»¤æ—¶ï¼Œè‡ªåŠ¨æ‰§è¡Œé»˜è®¤å­å‘½ä»¤ï¼ˆæ— éœ€æ‰‹åŠ¨æ£€æŸ¥ `sys.argv`ï¼‰ã€‚
2.  **ä¸Šä¸‹æ–‡è¦†ç›–**ï¼šè¿›å…¥ç‰¹å®šå­å‘½ä»¤æ—¶ï¼Œè‡ªåŠ¨ä¿®æ”¹çˆ¶çº§/å…¨å±€å‚æ•°çš„é»˜è®¤å€¼ï¼ˆæ— éœ€ç¼–å†™å¤§é‡ `if/else`ï¼‰ã€‚
3.  **ç»“æ„æ¸…æ™°**ï¼šç”¨ä¸€ä¸ªåµŒå¥—å­—å…¸æ›¿ä»£å‡ åè¡Œ `add_argument` ä»£ç ã€‚

é€‚åˆéœ€è¦å¿«é€Ÿæ„å»ºåŒ…å«å¤šçº§å­å‘½ä»¤ã€ä¸”å‚æ•°é»˜è®¤å€¼é€»è¾‘å¤æ‚çš„å·¥å…·è„šæœ¬ã€‚

## ğŸ“¦ å®‰è£…

```bash
pip install git+https://github.com/Lexiang-Xiong/elegant_cli.git
```

## âš¡ æç®€ç¤ºä¾‹

**åœºæ™¯ï¼šä¸€ä¸ªæ„å»ºå·¥å…·ã€‚**
*   **å…¨å±€**ï¼šæœ‰ä¸€ä¸ªä½ç½®å‚æ•° `target_dir`ï¼Œé»˜è®¤æ˜¯å½“å‰ç›®å½• `.`ã€‚
*   **Check æ¨¡å¼**ï¼šå¦‚æœä¸è¾“å…¥å‘½ä»¤ï¼Œé»˜è®¤è¿›å…¥æ£€æŸ¥æ¨¡å¼ã€‚æ”¯æŒ `-a` (`--all`) å‚æ•°æ¥å…¨é‡æ£€æŸ¥ã€‚
*   **Build æ¨¡å¼**ï¼šå¦‚æœè¾“å…¥ `build`ï¼Œé»˜è®¤ç›®å½•è‡ªåŠ¨å˜æ›´ä¸º `./src`ï¼ˆè¦†ç›–å…¨å±€é»˜è®¤å€¼ï¼‰ã€‚

```python
from elegant_cli import ElegantCLI

# 1. å®šä¹‰é…ç½®æ ‘
SCHEMA = {
    # å…¨å±€å‚æ•° (æ··åˆäº†ä½ç½®å‚æ•°å’Œ Flag)
    "args": {
        "target_dir": {"default": ".", "help": "ç›®æ ‡ç›®å½•"},
        "--verbose": {"default": False, "type": "bool", "help": "è¯¦ç»†æ—¥å¿—"}
    },
    
    # å­å‘½ä»¤å®šä¹‰
    "sub_command": {
        "__default__": "check",  # ä¸è¾“å‘½ä»¤æ—¶çš„é»˜è®¤è¡Œä¸º
        
        "check": {
            "help": "æ£€æŸ¥ä»£ç ",
            "args": {
                # å¸ƒå°”å€¼ Flag: ä¸è¾“ä¸º False, è¾“å…¥ -a åˆ™ä¸º True
                "-a": {"default": False, "type": "bool", "help": "æ£€æŸ¥æ‰€æœ‰æ–‡ä»¶"}
            }
        },
        
        "build": {
            "help": "æ„å»ºé¡¹ç›®",
            # ã€æ ¸å¿ƒåŠŸèƒ½ã€‘è¿›å…¥ build æ¨¡å¼ï¼Œè‡ªåŠ¨ä¿®æ”¹ target_dir é»˜è®¤å€¼
            "overrides": { "target_dir": "./src" }, 
            "args": {
                "--minify": {"default": False, "type": "bool"}
            }
        }
    }
}

def main():
    # 2. è¿è¡Œ (è¿”å›æ ‡å‡† argparse.Namespace)
    args = ElegantCLI(SCHEMA).run()

    print(f"æ‰§è¡Œå‘½ä»¤: {args.command}")
    print(f"æ“ä½œç›®å½•: {args.target_dir}")
    
    if args.command == "check":
        print(f"å…¨é‡æ£€æŸ¥: {args.a}")  # å¯¹åº” -a å‚æ•°

if __name__ == "__main__":
    main()
```

### æ•ˆæœæ¼”ç¤º

1.  **é»˜è®¤è·¯ç”± + é»˜è®¤å‚æ•°**
    *(ä¸è¾“å‘½ä»¤ -> è¿› check; æ²¡è¾“ -a -> å…¨é‡æ£€æŸ¥ä¸º False)*
    ```bash
    $ python main.py
    æ‰§è¡Œå‘½ä»¤: check
    æ“ä½œç›®å½•: .
    å…¨é‡æ£€æŸ¥: False
    ```

2.  **é»˜è®¤è·¯ç”± + Flag å¼€å…³**
    *(ä¸è¾“å‘½ä»¤ -> è¿› check; è¾“äº† -a -> å…¨é‡æ£€æŸ¥ä¸º True)*
    ```bash
    $ python main.py -a
    æ‰§è¡Œå‘½ä»¤: check
    æ“ä½œç›®å½•: .
    å…¨é‡æ£€æŸ¥: True
    ```

3.  **ä¸Šä¸‹æ–‡è¦†ç›–**
    *(è¿› build -> ç›®å½•è‡ªåŠ¨å˜ä¸º ./src)*
    ```bash
    $ python main.py build
    æ‰§è¡Œå‘½ä»¤: build
    æ“ä½œç›®å½•: ./src
    ```

4.  **ç”¨æˆ·ä¼˜å…ˆ**
    *(ç”¨æˆ·æŒ‡å®šç›®å½• -> è¦†ç›–ä¸€åˆ‡é»˜è®¤å€¼)*
    ```bash
    $ python main.py build /tmp
    æ‰§è¡Œå‘½ä»¤: build
    æ“ä½œç›®å½•: /tmp
    ```

## ğŸ“„ License

MIT License